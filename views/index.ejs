<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        body {
            text-align: center !important;
            margin: auto !important;
        }

        .mainCalculadora {
            margin-top: 3% !important;
            margin-left: auto !important;
            margin-right: auto !important;
        }

        #conversion {
            width: 300px;
        }

        input[type='number'] {
            -moz-appearance: textfield;
        }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
        }
    </style>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversion Dolar Blue</title>
</head>

<body>
    <main class="mainCalculadora">
        <div class="">
            <h3 class="text-center">Conversion Dolar Blue ðŸ’¸</h3>
            <p class="text-center">Con esta pagina podras convertir dolar blue a pesos argentinos, sin necesidad de calculadora y mas facil! </p>
            <br>
                <input type="number" id="valorCalculo" min="0" class="form-control justify-content-center" style="margin:auto; width: 300px;"
                placeholder="Precio en Dolares" id="valorCalculo">
            <br>
            <button class="btn btn-primary justify-content-center" id="conversion">Convertir</button>
            <br>
            <div id="resultadoIva">

            </div>
        </div>
        <footer class="text-center text-white fixed-bottom">
            <div class="text-center p-3 text-muted">
              Creado por Franco Piccirilli. Basado en la API de Bluelytics.
              <a class="text-muted" href="https://github.com/breakerjs">Github</a>
            </div>
          </footer>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
    </script>
    <script>
        'use strict'
        // url de la api
        const url = 'https://api.bluelytics.com.ar/v2/latest'
        // funcion para calcular y mostrar valor de dolar blue
        function calculoDolar() {
            document.getElementById('conversion').addEventListener('click', () => {
                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        let resultado = document.getElementById('resultadoIva')
                        resultado.innerHTML =
                            `<h6 style="margin-top:30px;">El valor del dolar blue es: ${data.blue.value_buy}$ars ðŸ’¹</h6>`
                        const calculo = document.getElementById('valorCalculo').value * data.blue.value_buy
                        resultado.innerHTML += `<h5>Resultado: ${calculo}$ars</h5>`
                    })
            })
        }
        // evento para prevenir el uso de signos en el input (-, .) --copiado
        const $input = document.querySelector("#valorCalculo");
        const BIRTHNUMBER_ALLOWED_CHARS_REGEXP = /[0-9\/]+/;
        $input.addEventListener("keypress", e => {
            console.log(e);
            if (!BIRTHNUMBER_ALLOWED_CHARS_REGEXP.test(e.key)) {
                e.preventDefault();
            }
        }); // --copiado
        // llamado a la funcion
        calculoDolar();
    </script>
</body>

</html>